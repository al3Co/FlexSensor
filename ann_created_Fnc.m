function [Y,Xf,Af] = ann_created_Fnc(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 08-Jun-2018 14:38:18.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx6 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx4 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0];
x1_step1.gain = [4;6.89655172413793;2.1505376344086;1.78571428571429;1.63934426229508;4.65116279069768];
x1_step1.ymin = -1;

% Layer 1
b1 = [-6.0412446870787723796;-8.590015593945350858;-2.9566044965450068993;3.5388196141428767127;3.4170482583874122184;-2.8208378460812171262;4.2361284676429997731;7.3019127177831641973;9.1726390258049459447;1.588912490982191672;-3.1394425251379249886;-3.4092519100245093355;2.7983756625478410918;2.0512086683109767016;6.4556715622198881377;-1.2024852712760019102;-3.7066166122318788823;2.0895980683196335725;-1.9091394757141757488;-5.6117512166667813389;2.1058020634797771642;3.9735728275925579212;-2.3994006637347351507;-7.9453219248384394646;2.2169195697548640389;3.3618526364026699582;-1.9089781369337410766;2.9740213862775388698;-1.758293342740410603;1.9507992045155966299;-3.4138784986426391477;9.5921036948502482744;-6.1683634312794932697;2.8839268992134656777;-1.8981863942880123908;2.8109230805081941718;-5.1669230675682857878;-2.772364886866417244;6.2692507876713028381;-2.0598140409237029047;-2.3752714131698304811;-7.0400476137020477907;-1.6640655680354192736;3.3291572085944074466;6.6295013478319129163;-3.4450795477178477455;-15.848493932334827505;-9.0699113898048349114;4.0773842898553294134;-4.2174282909443938649;3.7467398548627852684;-7.7020035779699735912];
IW1_1 = [0.9188919789511491576 3.8642661733818481906 2.7783247110089375198 -2.9813297228533874872 1.0569675754699203729 4.5163525733045517541;2.5243340336918489442 -0.50507539640686660576 5.5597624658680340204 -3.2938151762338301332 0.73362531451796308968 -0.9690674995335278874;0.89741339354899163361 2.4605695268030736145 0.11406223122882694354 0.20391828975742015695 2.4712184610388829853 0.48824349708600089937;-0.23791670216473392863 0.36323203663422015675 -4.3196892399412440966 -0.28253773474642629449 -0.26677326460376116213 0.39259731584405477278;-0.73172818425493135752 0.64435537549122601231 -0.48698038156372774887 2.0363644920833405827 2.438673099121363208 -0.87321011117331226448;0.34922282812031751886 -0.63331028309477677141 -0.92503679706062624799 -4.1568713874719822599 0.7267205568796764048 0.59019586126797707326;3.6063712143381523312 -1.4889046652878252797 -3.9508575847635607481 0.96195597840158642011 0.13386037111969034674 -3.4577204904416278808;0.21414696853475112537 -7.0647940778664715111 -2.1244129417192874065 5.6164084999994550174 -1.5690756681830575481 2.7699615713609362366;-1.2812539822473594242 1.0717139611431265589 -7.7877771220657869833 1.7818886126062718489 4.9597774820391995476 -2.4092358615693578727;-0.060481756617151508082 2.2810537203645164794 0.2974432523419705543 1.9448185250523351009 1.2712323460447982892 -0.36236717014482422439;4.8570152861572735148 1.8672212399793541859 -1.7924006716151847929 2.5142100201924577618 -2.6208734427424089652 -1.42827996604287355;-1.2475636052537852905 -1.0999118603248572157 1.8723127611250844904 -4.0788571056522506808 -2.2181733170321074056 -6.0149178175422788328;-0.43643627890148245507 3.3387842103017186801 1.5546863156586754329 3.6205599396333334461 1.1690139425676335794 1.8928889273175362185;-3.9303320848039762225 -2.0871641886682512634 1.1746188163468351817 -1.2450582542039319023 2.1666204932130446181 0.9504855458307890359;-0.2947434588089913321 -3.3531841539940394625 -3.6292559617966206886 2.8494268077315201282 -0.083276799496269829359 -4.5096589423365474048;1.6310689171136885101 -0.3502349244946452167 2.4780225690482162726 -2.3024267711411030568 0.5367037700508897613 4.793482342959753062;0.55291705108488109488 1.7524841877230628029 -0.14821142786483479381 0.52650731333581102245 2.5325929131881128598 -0.56698332610149326793;1.6364069629739772527 2.26945973093220843 0.096470111022219820485 -0.0080105337610245075375 1.8027172095887755709 -2.3259933444262195223;-0.10906667944007374105 -1.6080891822145577663 -0.5600726859929866519 -1.1853107891542795649 -1.6161368918630145686 1.3228500596788645982;3.3942506906740494976 -1.4478532371978785065 -2.0239906381121537393 -3.4451077710479061089 -2.2722253500943421223 2.0345555094987326505;-0.37692808755966716872 2.9508448373775912899 1.4360509382012485169 2.8301485038483820134 1.0442964917198571673 0.93512168614327917382;0.68385057202149568401 -2.0337756171056780019 -1.5679691745641601841 1.958731418250766021 3.3605535155170018768 -2.2652268984469343671;1.1157399048805516362 0.29349804133034651521 -0.38507093611397652522 -5.995727927005054525 2.124781497255748608 3.1225329682822220434;0.44449842507473513731 -0.056863298393137223785 4.780561084688291551 -11.416197542183882163 2.4315718396031531512 8.054540200042294984;-0.2514407408246129294 0.42981320550357265953 -0.35459943886920264333 3.1638868940493032333 1.0724448354962949903 -0.26587359807028770886;0.3788162484733390567 -1.1926256425363874758 -1.7824475937343362553 2.2120347000437390328 2.3110846766856276702 -2.4393864933959257257;-0.85670413654209776055 -2.020520569982465986 -0.37856855979781794952 -0.54412711721018169886 -1.6687325175088041362 1.9829072496816859683;1.5304416948093588768 1.3363990625412882629 -3.5640625302639863392 0.51307461719413693935 4.3841069426306384926 -4.0933707337983271657;1.9098716339222627791 0.012062636010146015816 -1.4986361713819038588 -5.4034413014631352823 -0.66654888304335990767 1.2931600824600784083;-1.1092846459455425467 1.2063621298390214687 1.0231299069452390871 4.538331833496215495 1.7690455528800084206 -1.8217293484708658724;-1.2459534961171176981 -1.0187895982081907054 1.7958352396827081954 -3.7809155164692835882 -2.1304064643932068002 -5.9019177656274708355;4.9307760829282072379 -0.20801422631094268478 -12.348921300023400605 6.1841599175898114282 14.183569998723296379 -11.856990435290743591;-0.28650125095049866486 -2.4146975747877132967 6.8829629775003517977 -2.4121201615153973208 -5.6259612094534432458 1.6269636510197784673;6.6377922640311206592 0.9895652287322798113 1.1691087403597386629 -4.5949123367162911791 -0.24687781272111003483 -8.8273539840639543286;3.7943298375161433889 2.1458106865198365298 -1.0918085601224671866 1.0901624129318634449 -2.1114916427671932553 -0.85825240102401978426;1.0693604400052416636 1.7254613776810105996 -3.3548728207101730092 1.0244019191698487958 4.1659509233759557389 -3.970654433545103501;-2.338259181346100668 -0.56892579300335699433 5.0391761126592573561 0.25478178307413335002 -4.4858536551661352121 1.8432435961808570912;-0.19021011609289650846 0.15147072227336960681 0.25069512768526042157 -3.333881110932678471 -1.8333640370759218818 -0.39736281632573405842;4.654610702937461042 2.4040086255212926858 -2.5829660213073326602 2.277339938954661136 2.1082834200633242538 0.82751413061802714388;2.7343953302443262388 -0.17730466837218231135 -1.6539228787391526687 -5.999331906045752838 -0.78082224620107254509 1.8570102145677853667;1.0368473858336650917 0.28991189928371352558 -0.83316583696207491272 -2.4261392770792897799 -2.6110768810970919063 6.027100210624548815;-2.8282287781825039552 3.4455187171956631609 5.6249757933224149298 -2.8875141775613824002 -1.9430356897629970092 1.3875075308529671858;1.356316028386402639 -0.00064728063668021383614 -0.95708115901716761531 -5.0918020858888111135 -0.45343308592373865462 0.87708918177228079038;0.27468128931204138787 -0.29407368219600649173 2.5104111603698950894 1.1111929570890077823 0.39869271727003774419 -0.45591051276242061663;2.110232171890776609 3.7124952011521159534 -5.22899161540434676 7.4997945988623104796 1.6623298523733871512 -1.7918694393889031957;0.16425540730451559934 -0.0043687759118631397728 -1.3043839678588813324 -4.998168594749118121 0.82864125261906651509 -0.29614271101709310763;-6.970819610831898494 4.5872295639671127887 -13.696186430696126735 -3.478890683355948088 -1.0105402901878748345 0.63971211624447898991;-5.6708192806878408021 -0.70755346707299593412 3.3429165248384715703 -4.2415222737432207722 -4.6212501466416417983 -3.4854332103655432107;3.965834787511214099 -1.7554550967793012273 -3.7087980043056494317 0.23154687930542475205 0.35561712296851699655 -3.6215695408878274542;-1.5354009508745922741 1.3797628121981118099 -0.4702180464991124742 -0.10593396815892779095 0.77018962321988848618 3.3221038141535634836;2.833085989857967224 0.2156048465913388279 -1.1330879975081411537 -0.17088714101780616561 -2.1387786581747572079 -7.1764299344373636558;-0.46931837665401870963 6.0993809899769999561 -0.9165619843939618594 2.706135059564036105 0.12005774279867489907 3.7183273784022268238];

% Layer 2
b2 = [1.3810882999787701397;1.2788995772921598615;0.18671496669805676127;-0.73790897720670578508];
LW2_1 = [-0.83312815730695444216 1.6350304183746646736 0.29334323664413530786 0.064677568032787915997 -1.3356720150066334618 4.0882039505346119412 3.4180244065541680598 -0.54949336864525510915 0.67484669765855775925 -0.74961935389791267692 -0.15035479221090014557 1.2319742983081518606 -1.3111932337174265761 -1.8850362380070297963 -1.2235267472299287128 0.0097138914178157894502 -0.38162592789129429205 1.3444045009206408992 -2.2571744839160681195 -0.58765232987288240629 1.70144062057584744 1.7057789622331498425 0.14016664177368998168 -0.17692391110146113431 6.5789648797896056465 -2.7800952073033560197 2.375081242718708463 1.3162706764853129293 -5.6796195073208348703 -1.5882645174747174188 -1.2573340681121989437 0.47668531711976136478 -0.50258524223385225849 0.20236794859052059659 -1.7659442037670811665 -1.4423898376626580475 0.95517762962050289932 3.1184475510253113484 -0.52080974066160534708 2.1272652318562803586 -0.66338251543129778121 -0.43529628083788207693 3.5275222973488080669 -1.7030404549108670853 -0.47555998217739925416 -2.7994276666486967997 -0.2250384256096440716 -0.60615467161780722805 -2.9129123703583146288 -1.0630999849833526749 0.024615887258884961569 -0.64806697592483342163;-1.3350270637013339492 1.7191311691193755795 -0.14656517421744416629 -0.041080402996729652176 1.7589680768055226956 -2.1848514947452861712 -0.84809098910522140446 -0.073276190865679130537 0.17754372838427290304 0.80803880694921503824 -0.53695218616558804126 0.17628632105925268192 0.52465721868480941215 -3.101835406938668438 -2.0048990351710984648 -0.41862837156375282133 0.20069237901559947024 -2.8651610638532623021 3.7213890629670554056 0.84441253788542713909 -0.81326618678572326626 0.47124892971307480449 0.68816333689621544956 -0.31172173879522074857 -3.9317695067014346577 -1.8589734178730989989 -4.9843661360874245148 1.5770305156616575282 5.7722205767895120587 1.3457340152251786591 -0.16443692734953574419 0.42785487806224953289 -0.16557780028950311313 0.2691182345218740557 -2.5529537348274118358 -1.5399592991139587905 0.51346795375746812073 -2.1251652466819335174 0.44780325929999914569 -2.9867441755936900982 -0.51344024490520057125 -1.0870455940043353138 -2.898225293855114959 1.5003526669134492622 -0.044761233062626866464 1.1269371900383564622 0.40824624995857944354 0.18355641390514268463 0.8250449386356829562 3.3542508158071968616 0.52567571872481544393 -2.3656589291217899884;0.15008077625151444723 1.3842171134158105517 0.47591884576110482508 0.095785173048750699154 0.07073019396119578639 -0.1811746538693516928 0.77518837025244213823 -0.15019098911885073178 -0.059965412191298785027 -0.18738803054757122157 -0.036235135082693471775 0.040389668756632399194 -0.210408073264979123 -1.1397370243930804445 0.028662936703603085487 -0.085207313960969241484 -0.59009565386536200204 -0.11141567606160723836 0.057065099519207927725 0.1410756421037095143 0.35994348483352900381 0.20687525360074296432 0.22529086751536678279 -0.014570723565483134979 0.33542603732255726889 -0.47729855089939277057 -0.26639769253876849353 -0.12300906450723164687 0.19479769167567806409 -0.0081889438488389858228 -0.06337428862717799094 0.44386147950754556435 -0.024863318375028569535 0.10692343864573700118 -1.1394838610205910712 0.11287306073647496163 0.052941834610279271678 0.068573095987128032669 -0.11226252351809169749 -0.35081723331049302628 -0.15554328568597272642 -0.20659284382021411708 0.083322904834805117114 -0.13857939881992778486 -0.01608372383842734954 0.22182829460177377889 -0.045217849034292670329 -0.12256251162060660675 -0.66128265867025259883 0.017916541369888204505 -0.033444657988785694847 -1.3550439523888777593;0.55114025327697147016 -0.72450396866709110277 -0.3129496722367771655 -0.062225934040835519101 0.21068416169541961946 -0.76149281350532926904 -1.0551783537364645138 0.20231292993621666221 -0.12930271348167546308 0.045736338106259016856 0.053473557461582166273 -0.36456717671097965683 0.36026346266562597753 1.1013911588939524488 0.77318688243248423486 0.0098793835804514649329 0.38349603680348642865 0.15931999879939012787 -0.011710000364238293963 -0.035105725234728261952 -0.40449725936858632602 -0.57078396907624306955 -0.26056147358385778334 0.097310273855344867067 -1.7177085154454814209 0.96874867395743546883 0.28092867122926684642 -0.63811402075378409471 0.54497726234893617558 0.2121267341994751976 0.38698652817248985203 0.91665295414323522127 0.12493776337596770865 -0.12613874218850329445 1.0743485106865551248 0.67786884100762379024 -0.29113530220912919866 -0.86833914564766911948 0.21261228403982498913 0.030349638955785761263 0.27595419882476845963 0.28258984222879079962 -0.58939780677576947276 0.3227240295913288981 0.14428968757835491932 0.56693113368122283191 0.0028203981202047805933 0.25728902939294923113 0.8773899370465150227 -0.1191302442015003682 0.0052251011556508353273 0.32799747418129909793];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.42706180105189;1.56828427348055;1.99631878815464;1.23231322444614];
y1_step1.xoffset = [-0.762759;-0.679394;-0.556332;-0.992793];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
